version: '3'

tasks:
  install-cargo:
    cmds:
      - echo "Installing Rustup..."
      - curl https://sh.rustup.rs -sSf | sh -s -- -y
      - source "$HOME/.cargo/env"
      - cargo install wasm-bindgen-cli
  export-web:
    cmds:
      - cargo build 
        --release 
        --target wasm32-unknown-unknown
      - wasm-bindgen 
        --out-name bloons 
        --out-dir ./out/game/ 
        --target web 
        ./target/wasm32-unknown-unknown/release/bloons.wasm
      - cp -r assets out/
      - cp -r web/ out/
    silent: true
